# AI Code Review Action

AI-powered code review GitHub Action that provides automated code analysis and feedback on pull requests.

## Features

- ü§ñ **Automated Code Analysis**: AI-powered review of code changes
- üí¨ **PR Comments**: Posts review results directly on pull requests
- üìä **Job Summaries**: Detailed analysis visible in GitHub Actions
- ‚ö° **Fast Setup**: Easy to integrate into existing workflows
- üîÑ **Auto-sync**: Automatically keeps built files up-to-date

## Usage

### Basic Usage

```yaml
name: Code Review
on:
  pull_request:
    branches: [ main ]

jobs:
  review:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: 6529-Collections/ai-code-review-action@main
        with:
          greeting: "AI Code Review Complete"
          github-token: ${{ secrets.GITHUB_TOKEN }}
          anthropic-api-key: ${{ secrets.ANTHROPIC_API_KEY }}
```

### Advanced Usage

```yaml
- uses: 6529-Collections/ai-code-review-action@main
  with:
    greeting: "Custom review message"
    github-token: ${{ secrets.GITHUB_TOKEN }}
    anthropic-api-key: ${{ secrets.ANTHROPIC_API_KEY }}
  id: review

- name: Use review output
  run: echo "Review result: ${{ steps.review.outputs.message }}"
```

## Inputs

| Input | Description | Required | Default |
|-------|-------------|----------|---------|
| `greeting` | Custom greeting message for the review | No | `Hello` |
| `github-token` | GitHub token for API access | No | `${{ github.token }}` |
| `anthropic-api-key` | Anthropic API key for Claude access | Yes | - |

## Outputs

| Output | Description |
|--------|-------------|
| `message` | The formatted review message |

## What it does

1. **Analyzes code changes** in pull requests
2. **Posts review comments** directly on the PR
3. **Creates job summaries** with detailed analysis
4. **Provides actionable feedback** for developers

## Examples

### PR Comment Output
The action will post a comment like this on your PR:

```markdown
## ü§ñ AI Code Review Results

AI Code Review Complete from GitHub Actions!

| File | Status | Issues |
|------|---------|---------|
| src/index.ts | ‚úÖ Clean | 0 |
| Example file | ‚ö†Ô∏è Warning | 1 |

---
*Generated by AI Code Review Action*
```

### Job Summary
Detailed analysis is also available in the GitHub Actions job summary.

## Development

### Project Structure

The action is built with a modular structure:

```
src/
‚îú‚îÄ‚îÄ index.ts       # Main entry point
‚îú‚îÄ‚îÄ validation.ts  # Input validation
‚îî‚îÄ‚îÄ utils.ts       # Utility functions
```

### Local Development Setup

1. **Install dependencies**
   ```bash
   yarn install
   ```

2. **Set up environment variables**
   ```bash
   cp .env.example .env
   # Edit .env and add your ANTHROPIC_API_KEY
   ```

3. **Available scripts**
   ```bash
   # Build the action
   yarn build

   # Run tests
   yarn test

   # Run linter
   yarn lint

   # Format code
   yarn format

   # Test locally with Node.js
   yarn test:local "Test message"

   # Test with act (GitHub Actions locally)
   yarn test:act
   ```

### Local Testing

#### Method 1: Node.js Testing
```bash
# Uses test-local.js and loads .env file
yarn test:local "Hello World"
```

#### Method 2: GitHub Actions Testing with act
```bash
# Install act
brew install act

# Test the action locally (loads secrets from .env)
yarn test:act
```

### Environment Variables

For local development, create a `.env` file:

```env
ANTHROPIC_API_KEY=your_anthropic_api_key_here
```

The `.env` file is already in `.gitignore` to keep your API keys secure.

## Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Add tests
5. Submit a pull request

## License

MIT License - see [LICENSE](LICENSE) file for details.

## Support

If you encounter any issues, please [create an issue](https://github.com/6529-Collections/ai-code-review-action/issues) on GitHub.